{"version":3,"sources":["../../API/controllers/OrderControllers.js"],"names":["validateOrder","order","schema","name","Joi","string","min","required","Description","price","number","quantity","validate","OrdersModel","OrdersController","req","res","orders","getOrders","undefined","length","status","send","message","body","error","details","neworder","createOrder","trim","upOrder","find","anOrder","id","parseInt","params","json","someorder","OrderIndex","indexOf","splice"],"mappings":"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","sourcesContent":["import Joi from 'joi';\r\nimport OrdersModel from '../models/OrderModel';\r\n\r\nfunction validateOrder(order) {\r\n  const schema = {\r\n    name: Joi.string().min(2).required(),\r\n    Description: Joi.string().min(5).required(),\r\n    price: Joi.number().required().required(),\r\n    quantity: Joi.string().required(),\r\n  };\r\n\r\n  return Joi.validate(order, schema);\r\n}\r\n\r\nconst order = new OrdersModel();\r\nexport default class OrdersController {\r\n  /**\r\n  * Get All Orders\r\n  * @param {object} req\r\n  * @param {object} res\r\n  * @return {object} all orders\r\n  */\r\n  static getAllOrders(req, res) {\r\n    const orders = order.getOrders();\r\n    if (orders === undefined || orders.length === 0) {\r\n      return res.status(204).send({ message: 'No Orders' });\r\n    }\r\n    return res.status(200).send(orders);\r\n  }\r\n\r\n  /**\r\n   * Create a new order\r\n   * @param {object} req\r\n   * @param {object} res\r\n   * @return {object} created order || all inputs are required\r\n   */\r\n  static createOrder(req, res) {\r\n    const { error } = validateOrder(req.body);\r\n    if (error) return res.status(400).send(error.details[0].message);\r\n\r\n    const neworder = order.createOrder(req.body);\r\n    neworder.name = req.body.name.trim();\r\n    neworder.Description = req.body.Description;\r\n    neworder.price = req.body.price;\r\n    neworder.quantity = req.body.quantity;\r\n\r\n    return res.status(201).send(neworder);\r\n  }\r\n\r\n  /**\r\n    * Update order info\r\n    * @param {object} req\r\n    * @param {object} res\r\n    * @return {object} updated order\r\n    */\r\n  static updateOrder(req, res) {\r\n    const orders = order.getOrders();\r\n    const upOrder = orders.find(anOrder => anOrder.id === parseInt(req.params.id));\r\n    if (!upOrder) return res.status(404).send({ message: 'Order Not Found' });\r\n    const { error } = validateOrder(req.body);\r\n    if (error) return res.status(400).send(error.details[0].message);\r\n    upOrder.name = req.body.name;\r\n    upOrder.Description = req.body.Description;\r\n    upOrder.price = req.body.price;\r\n    upOrder.quantity = req.body.quantity;\r\n    return res.status(200).json(upOrder);\r\n  }\r\n\r\n  /**\r\n    * delete a order option\r\n    * @param {object} req\r\n    * @param {object} res\r\n    * @return {object} deleted order || order not found\r\n    */\r\n  static deleteOrder(req, res) {\r\n    const orders = order.getOrders();\r\n    const neworder = orders.find(someorder => someorder.id === parseInt(req.params.id));\r\n    if (!neworder) res.status(404).send({ message: 'Order Not found' });\r\n\r\n    const OrderIndex = orders.indexOf(neworder);\r\n    orders.splice(OrderIndex, 1);\r\n    return res.status(204).send(neworder);\r\n  }\r\n}\r\n"],"file":"OrderControllers.js"}